[&lt; Retour au sommaire](../README.md)

# Gestion des actions avec les contrôleurs (~ 45 min)
[Lien Trailhead](https://trailhead.salesforce.com/fr/modules/lex_dev_lc_basics/units/lex_dev_lc_basics_controllers)

## Objectifs de formation
Une fois cette unité terminée, vous pourrez :
- Créer un contrôleur côté client afin de gérer les actions utilisateur.
- Lire les valeurs d’attributs de composants.
- Lire les valeurs de contrôles d’interface utilisateur depuis votre composant.
- Écrire du code contrôleur en JavaScript qui modifie l’interface utilisateur.


## Gestion des actions avec les contrôleurs
Jusqu’à présent, nous n’avions travaillé qu’avec du balisage style XML et nos composants ne réagissaient pas aux entrées de l’utilisateur. Nous alons changer cela en ajoutant du code JavaScript.

Pour commencer, étudions un composant `helloMessageInteractive` très simple, et imaginons ce qu’il devrait faire pour gérer son comportement simple.

<img src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/fr-fra744edbd7edb9e682ed35c8da0d0b479.png"/>

Il comprend du texte statique, un message (actuellement vide) et deux boutons. Voici le code :

```xml
<aura:component>
 
    <aura:attribute name="message" type="String"/>
 
    <p>Message of the day: <ui:outputText value="{!v.message}"/></p>
 
    <div>
        <ui:button label="You look nice today."
            press="{!c.handleClick}"/>
 
        <ui:button label="Today is going to be a great day!"
            press="{!c.handleClick}"/>
    </div>
 
</aura:component>
```

Il devrait vous être familier. Tout ce que nous avons vraiment fait, c’est ajouter deux composants `<ui:button>` à `helloMessage`. Lorsque vous cliquez sur un bouton, le message du jour se met à jour.

On notera l'attribut `press="{!c.handleClick}"` sur le `<ui:button>` qui permet d’affecter un comportement au bouton.

Tout comme l’expression `v.message` que nous avons vue précédemment, `c.handleClick` est un fournisseur de valeurs `c` avec une propriété `handleClick`. `c` est le fournisseur de valeurs pour le contrôleur côté client du composant, et `handleClick` est une fonction définie dans ce contrôleur. Donc, `{!c.handleClick}` est une référence à un gestionnaire d’actions du contrôleur du composant.

<img src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/fr-fr69189905913cd2425d050a29819f2a71.png"/>

Un contrôleur est une ressource dans un paquet de composants, qui contient les gestionnaires d’actions de ce composant. Les gestionnaires d’action sont quant à eux tout simplement des fonctions JavaScript dont la signature est spécifique.

Examinons le contrôleur `helloMessageInteractive` plus en détails pour rendre cette explication un peu plus concrète.

```js
({
    handleClick: function(component, event, helper) {
        var btnClicked = event.getSource();         // the button
        var btnMessage = btnClicked.get("v.label"); // the button's label
        component.set("v.message", btnMessage);     // update our message
    }
})
```

Le format des ressources Contrôleur est intéressant. Ce sont des objets JavaScript contenant un mappage des paires nom-valeur, dans lequel le nom est celui du gestionnaire d’actions et la valeur est une définition de fonction.


## Défi pratique
1. Ajoutez un bouton au composant `campingListItem`. Ce dernier permettra d’indiquer qu’un élément du matériel est rangé.
2. Le bouton contiendra le texte « Packed! » et fera appel à une fonction `packItem` du controleur.
3. Cette fonction mettra à jour l’attribut `Packed status` de l’objet `item` et désactivera le bouton.
4. Validez votre travail automatiquement grâce au [défi Trailhead](https://trailhead.salesforce.com/fr/modules/lex_dev_lc_basics/units/lex_dev_lc_basics_controllers#challenge) avant de passer à l'unité suivante.

---
[Unité suivante &gt;](06.md)
